//----------------------------------
// Lab 3 - task03.c
//----------------------------------
// Objective:
//
//


#include "init.h"
#include "spi.h"
#include <stdio.h>
#include <stdlib.h>

//------------------------------------------------------------------------------------
// Prototypes
//------------------------------------------------------------------------------------
void TerminalInit( void );
//------------------------------------------------------------------------------------
// Global Variables
//------------------------------------------------------------------------------------
SPI_HandleTypeDef hspi2;
uint8_t rx, tx;

//------------------------------------------------------------------------------------
// Utility Functions
//------------------------------------------------------------------------------------
void TerminalInit( void )
{
	printf("\033[0m\033[2J\033[;H");
	fflush(stdout);
}

//------------------------------------------------------------------------------------
// MAIN Routine
//------------------------------------------------------------------------------------
int main(void) {
	// Initialize the system
	Sys_Init();
	TerminalInit();
	initSPI(&hspi2, SPI2);

	while (1)
	{
		rx = SPI_ReadWriteByte(&hspi2, 0xFF);
		printf("\033[H\033[2KReceiving following char: %c", rx);
		fflush(stdout);
		HAL_Delay(10);
	}
}


